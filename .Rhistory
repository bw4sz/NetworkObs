h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=.5
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=1
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=1
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=1
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
source('~/.active-rstudio-document', encoding = 'UTF-8', echo=TRUE)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=1
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=1
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=1
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
source('~/.active-rstudio-document', encoding = 'UTF-8', echo=TRUE)
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=0.5
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=0.5
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
##Simulate Interactions
h_species=3
plant_species=10
months=24
phenology=1
#Bill sizes
Bill<-rpois(h_species,10)
#Corolla sizes
Corolla<-rpois(plant_species,15)
#Subtract both and take absolute value
traitmatch<-abs(sapply(Corolla,function(x) x - Bill)/10)
#fill out for each month
traitarray<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
traitarray[,,x]<-traitmatch
}
#simulate some poisson distributed resource counts for each replicate
#this will be same for each species to start with.
resources<-array(NA,dim=c(h_species,plant_species,months))
#fill for each month
for (x in 1:months){
resources[,,x]<-rlnorm(1,4)
}
#standardize predictors
resources<-array(data=scale(resources),dim=c(h_species,plant_species,months))
#traitarray<-array(data=scale(traitarray),dim=c(h_species,plant_species,months))
#regression slope for trait-matching and resources
#trait match
gamma1=0.5
intercept<-.5
sigma_slope1<- 0.1
sigma_intercept<- 0.1
#resources
gamma2=0
sigma_slope2<- 0.1
#resources * traitmatch
gamma3=0.5
sigma_slope3<- 0.1
#draw values from hierarcichal distributions
beta1<-rnorm(h_species,gamma1,sigma_slope1)
beta2<-rnorm(h_species,gamma2,sigma_slope2)
beta3<-rnorm(h_species,gamma3,sigma_slope3)
alpha<-rnorm(h_species,intercept,sigma_intercept)
#fit regression
lambda<-exp(alpha + beta1 * traitarray + beta2 * resources + beta3 * resources * traitarray)
true_interactions<-array(data=sapply(lambda,function(x){rpois(1,x)}),dim=c(h_species,plant_species,months))
#combine and melt into a single datafFrame
mdat<-dcast(melt(list(y=true_interactions,traitmatch=traitarray,resources=resources)),Var1+Var2+Var3~L1)
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
ggplot(mdat,aes(col=resources,y=y,x=traitmatch)) + geom_point() + geom_smooth(aes(group=1),method="glm",method.args = list(family = "poisson"),formula=y~x) + theme_bw() + labs(x="Bill-Corolla Difference",y="Visits","Hummingbird") + ggtitle("Correlation in Simulated Data") + labs(col="Available Resources") + scale_color_continuous(low="blue",high="red")
tempfile()
a<-tempfile()
sink(a)
print("Hello World")
sink()
cat_a<-read.table(a)
print(cat_a)
a<-tempfile()
b<-1:10
sink(a)
print("Hello World")
b
sink()
cat_a<-read.table(a)
print(cat_a)
a<-tempfile()
b<-1:10
sink(a)
print("Hello World")
b
sink()
cat_a<-readLines(a)
print(cat_a)
a<-tempfile()
b<-1:10
sink(a)
print("Hello World")
b
warning("I'm a warning")
sink()
cat_a<-readLines(a)
print(cat_a)
a<-tempfile()
b<-1:10
sink(a,warning=T)
print("Hello World")
b
warning("I'm a warning")
sink()
cat_a<-readLines(a)
print(cat_a)
library(lme4)
library(lme)
install.packages("lme4")
head(iris)
lm(iris,Sepal.Width~Sepal.Length)
lm(data=iris,Sepal.Width~Sepal.Length)
qplot(iris$Sepal.Width,iris$Sepal.Length)
library(ggplot2)
qplot(iris$Sepal.Width,iris$Sepal.Length)
lm(data=iris,Sepal.Width~Sepal.Length)
head(iris)
qplot(iris$Sepal.Width,iris$Sepal.Length,col=iris$Species)
lm2<-lmer(data=iris,Sepal.Width~Sepal.Length + (1|Species))
library(lme4)
lm2<-lmer(data=iris,Sepal.Width~Sepal.Length + (1|Species))
lm<-lm(data=iris,Sepal.Width~Sepal.Length)
lm
lm2
